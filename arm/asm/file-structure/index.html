<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Common file structure - Assembler for ARM - Aluminium toolchain</title>
		<link rel="stylesheet" href="/style.css">
	</head>
	<body>
		<header>
			<h1><a href="/">Aluminium toolchain</a></h1>
			<h2><a href="/arm/asm">Assembler</a> for <a href="/arm">ARM</a></h2>
			<h3>Common file structure</h3>
		</header>
		<body>
			<p>Each file consists of defenitions of one or more <i>sections</i>. Those sections
				dirrectly correlate to sections in the resulting object file. Each section begins
				with <tt>.section &lt;name&gt;</tt> directive and continues until the next section
				begins.</p>
			<p>Each section contains directives, labels and code that will be assembled into an
				object file. It is an error to put any labels or code before the 1st section
				definition.</p>
			<p>Comments may be added to any part of the file. To mark text as comment, put a semicolon
				(;), everything after it and to the end of the line will be ignored.</p>
			<p>Labels are used to refer to other parts of code or data in a section. To define a
				label, type the name of the label, followed by a colon (:). Labels can also be defined
				with <tt>.equ</tt> directive. All labels will be put into the output object file.</p>
			<p>All instructions must be typed as in ARM manuals.</p>
			<p>A dot (<tt>.</tt>) can be used in any part of the code to point to the current location.
				If it is used in an instruction in Thumb mode, 1 is added to the address.</p>

			<h1>Example</h1>
			<pre>
; Comment example
.section code.main  ; define a section
.global main        ; mark main as a global symbol
.thumb_func         ; tell the assembler that the next label must be a thumb function
                    ; (the address will be increased by 1)
main:               ; define a label
	b .             ; instruction
			</pre>
		</body>
		<footer>
			<p><a href="../cli-options">Previous (command line options)</a> |
				<a href="../directives">Next (directives)</a></p>
		</footer>
	</body>
</html>
